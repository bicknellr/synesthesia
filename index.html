<html>
<head>


<script src="./module.js"></script>
<script src="./Utilities.js"></script>
<script src="./Synesthesia.js"></script>
  <link rel="stylesheet" href="./Synesthesia.css" />
<script src="./Synesthesia.Graph.js"></script>
<script src="./Synesthesia.UI.js"></script>
  <link rel="stylesheet" href="./Synesthesia.UI.css" />
<script src="./Synesthesia.Library.js"></script>

<script type="application/javascript">

window.addEventListener("load", function () {
  module("MAIN", ["Synesthesia", "Synesthesia.UI", "Synesthesia.Library"], function () {

    window.Synesthesia = require("Synesthesia");
    
    MainSynesthesia = new Synesthesia();
    MainUI = new Synesthesia.UI({
      node_canvas: document.getElementById("NodeCanvas"),
      node_div: document.getElementById("NodeDiv")
    });

    MainOutput = new Synesthesia.Library.MainOutput({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(MainOutput, {
      x: 300, y: 10
    });

    MainKeyboard = new Synesthesia.Library.KeyboardInput({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(MainKeyboard, {
      x: 20, y: 10
    });

    TestOsc1 = new Synesthesia.Library.Oscillator({
      synesthesia: MainSynesthesia,
      type: Synesthesia.Library.Oscillator.Type.SINE
    });
    //MainSynesthesia.mapInput(MainKeyboard, TestOsc1);
    MainUI.addNode(TestOsc1, {
      x: 20, y: 130
    });

    TestOsc2 = new Synesthesia.Library.Oscillator({
      synesthesia: MainSynesthesia,
      type: Synesthesia.Library.Oscillator.Type.SINE
    });
    //MainSynesthesia.mapInput(MainKeyboard, TestOsc2);
    MainUI.addNode(TestOsc2, {
      x: 20, y: 200
    });

    TestGain1 = new Synesthesia.Library.Gain({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestGain1, {
      x: 160, y: 10
    });

    TestGain2 = new Synesthesia.Library.Gain({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestGain2, {
      x: 160, y: 70
    });

    TestDelay1 = new Synesthesia.Library.Delay({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestDelay1, {
      x: 300, y: 250
    });

    TestOscilloscope = new Synesthesia.Library.Oscilloscope({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestOscilloscope, {
      x: 300, y: 130,
    });

    TestBiquadFilter = new Synesthesia.Library.BiquadFilter({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestBiquadFilter, {
      x: 20, y: 370
    });

    // UI
    //MainUI.start();
    MainUI.draw();

  });
}, false);

</script>
</head>
<body>

<!--
TODO: Set a single container div, have the main Synesthesia object
handle adding and managing the canvas and window container.
-->
<canvas id="NodeCanvas" width="640" height="480"></canvas>
<div id="NodeDiv"></div>

</body>
</html>
