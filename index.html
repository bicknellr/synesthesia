<html>
<head>


<script type="application/javascript" src="./module.js"></script>
<script type="application/javascript" src="./Utilities.js"></script>
<script type="application/javascript" src="./Synesthesia.js"></script>
  <link rel="stylesheet" type="text/css" href="./Synesthesia.css" />
<script type="application/javascript" src="./Synesthesia.Graph.js"></script>
<script type="application/javascript" src="./Synesthesia.UI.js"></script>
  <link rel="stylesheet" type="text/css" href="./Synesthesia.UI.css" />
<script type="application/javascript" src="./Synesthesia.Library.js"></script>

<script type="application/javascript">

window.addEventListener("load", function () {
  module("MAIN", ["Synesthesia", "Synesthesia.UI", "Synesthesia.Library"], function () {

    window.Synesthesia = require("Synesthesia");
    
    MainSynesthesia = new Synesthesia();
    MainUI = new Synesthesia.UI({
      node_canvas: document.getElementById("NodeCanvas"),
      node_div: document.getElementById("NodeDiv")
    });

    MainOutput = new Synesthesia.Library.MainOutput({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(MainOutput, {
      x: 300, y: 10
    });

    MainKeyboard = new Synesthesia.Library.KeyboardInput({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(MainKeyboard, {
      x: 20, y: 330
    });

    TestOsc1 = new Synesthesia.Library.Oscillator({
      synesthesia: MainSynesthesia,
      type: Synesthesia.Library.Oscillator.Type.SINE
    });
    //MainSynesthesia.mapInput(MainKeyboard, TestOsc1);
    MainUI.addNode(TestOsc1, {
      x: 20, y: 10
    });

    TestOsc2 = new Synesthesia.Library.Oscillator({
      synesthesia: MainSynesthesia,
      type: Synesthesia.Library.Oscillator.Type.SINE
    });
    //MainSynesthesia.mapInput(MainKeyboard, TestOsc2);
    MainUI.addNode(TestOsc2, {
      x: 20, y: 170
    });

    TestGain1 = new Synesthesia.Library.Gain({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestGain1, {
      x: 160, y: 170
    });

    TestGain2 = new Synesthesia.Library.Gain({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestGain2, {
      x: 300, y: 170
    });

    TestDelay1 = new Synesthesia.Library.Delay({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestDelay1, {
      x: 300, y: 330
    });

    TestWaveDisplay = new Synesthesia.Library.WaveDisplay({
      synesthesia: MainSynesthesia
    });
    MainUI.addNode(TestWaveDisplay, {
      x: 160, y: 10,
    });

    // UI
    MainUI.start();

  });
}, false);

</script>
</head>
<body>

<!--
TODO: Set a single container div, have the main Synesthesia object
handle adding and managing the canvas and window container.
-->
<canvas id="NodeCanvas" width="640" height="480"></canvas>
<div id="NodeDiv"></div>

</body>
</html>
